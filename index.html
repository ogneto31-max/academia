<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Controle de Ganho de Massa</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
<style>
  :root{
    --bg:#0f172a;        /* slate-900 */
    --card:#0b1226;      /* dark card */
    --muted:#94a3b8;     /* slate-400 */
    --text:#e2e8f0;      /* slate-200 */
    --primary:#22c55e;   /* green-500 */
    --primary-600:#16a34a;
    --accent:#38bdf8;    /* sky-400 */
    --danger:#ef4444;    /* red-500 */
    --warn:#f59e0b;      /* amber-500 */
  }
  *{box-sizing:border-box}
  body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,sans-serif;background:linear-gradient(180deg,#0b1020,#0f172a);color:var(--text);margin:0}
  .wrap{max-width:1100px;margin:0 auto;padding:24px}
  header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:16px}
  h1{font-size:24px;margin:0;letter-spacing:.2px}
  .meta{color:var(--muted);font-size:14px}

  /* Tabs */
  .tabs{display:flex;gap:10px;flex-wrap:wrap}
  .tab{border:none;background:#0e162e;color:var(--text);padding:10px 14px;border-radius:12px;cursor:pointer;font-weight:600;transition:.2s;border:1px solid #1f2a44}
  .tab.active{background:var(--primary-600)}

  /* Card */
  .card{background:linear-gradient(180deg,#0b1226,#0a0f20);border:1px solid #1f2a44;border-radius:16px;padding:18px;box-shadow:0 10px 30px rgba(0,0,0,.35);}

  /* Table */
  table{width:100%;border-collapse:collapse;margin-top:12px}
  th,td{border-bottom:1px solid #1f2a44;padding:10px;text-align:center}
  th{color:#cbd5e1;font-weight:700;background:#0e162e;position:sticky;top:0}
  tr:hover td{background:#0e152d}
  input[type="checkbox"]{transform:scale(1.25)}
  input[type="number"]{width:92px;background:#0e162e;border:1px solid #1f2a44;color:var(--text);padding:8px 10px;border-radius:10px}
  .controls{display:flex;gap:10px;flex-wrap:wrap;margin:10px 0}
  .btn{background:#0e162e;color:var(--text);border:1px solid #1f2a44;padding:8px 12px;border-radius:10px;cursor:pointer;font-weight:600}
  .btn.primary{background:var(--primary-600);border-color:transparent}
  .btn.danger{background:transparent;border-color:var(--danger);color:var(--danger)}

  /* Progress pill */
  .pill{height:10px;background:#122046;border-radius:999px;overflow:hidden;border:1px solid #1f2a44}
  .pill > span{display:block;height:100%;background:linear-gradient(90deg,var(--danger),var(--warn),var(--primary));width:0%}

  /* Sections */
  .section{display:none;margin-top:16px}
  .section.active{display:block}
  h2{margin:0 0 10px 0;font-size:18px}
  .grid{display:grid;gap:12px}
  .grid-2{grid-template-columns:1fr 1fr}
  .day{border:1px solid #1f2a44;border-radius:14px;padding:14px;background:#0e162e}
  .day h3{margin:0 0 6px 0;font-size:16px}
  ul{margin:6px 0 0 18px;}
  li{margin:4px 0}
  .kcal{color:var(--muted);font-size:13px}
  .muted{color:var(--muted)}
  .badge{display:inline-block;padding:3px 8px;border-radius:999px;font-size:12px;border:1px solid #1f2a44;background:#0e162e}

  canvas{background:#0e162e;border:1px solid #1f2a44;border-radius:12px;padding:8px}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <h1>üìà Controle de Ganho de Massa</h1>
    <div class="meta" id="meta"></div>
  </header>

  <div class="tabs">
    <button class="tab active" data-tab="diario">Di√°rio (checklist & peso)</button>
    <button class="tab" data-tab="alimentacao">Plano Alimentar (7 dias)</button>
    <button class="tab" data-tab="treino">Plano de Treinamento (7 dias)</button>
  </div>

  <!-- DI√ÅRIO -->
  <section id="diario" class="section active card">
    <div class="controls">
      <button class="btn primary" id="mark-today">Marcar tudo de hoje</button>
      <button class="btn" id="unmark-today">Desmarcar hoje</button>
      <button class="btn danger" id="reset">Resetar dados</button>
    </div>
    <div class="muted">Marque cada refei√ß√£o e o treino realizado. O % do dia usa 7 itens: treino + 6 refei√ß√µes.</div>
    <table id="tbl">
      <thead>
        <tr>
          <th>Data</th>
          <th>Treino</th>
          <th>Caf√©</th>
          <th>Lanche manh√£ (hiper)</th>
          <th>Almo√ßo</th>
          <th>Lanche tarde</th>
          <th>Jantar</th>
          <th>Ceia (hiper)</th>
          <th>% Dia</th>
          <th>Peso (kg)</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
    <div class="grid grid-2" style="margin-top:14px">
      <div>
        <h2>üìä Evolu√ß√£o do Peso</h2>
        <canvas id="pesoChart" height="220"></canvas>
      </div>
      <div>
        <h2>‚úÖ Cumprimento Di√°rio</h2>
        <canvas id="cumprimentoChart" height="220"></canvas>
      </div>
    </div>
  </section>

  <!-- ALIMENTA√á√ÉO DETALHADA (7 DIAS) -->
  <section id="alimentacao" class="section card">
    <h2>üçΩÔ∏è Plano Alimentar ‚Äì Semana (com hipercal√≥rico)</h2>
    <div class="grid grid-2">
      <div class="day">
        <h3>Dia 1 ‚Äì Segunda <span class="badge">Peito + Tr√≠ceps + Abd√¥men</span></h3>
        <ul>
          <li><b>Caf√© (~600 kcal):</b> 3 ovos mexidos; 1 fatia p√£o integral; 1 banana</li>
          <li><b>Lanche manh√£ (~600‚Äì700 kcal) ‚Äì Hipercal√≥rico:</b> 1 dose + 200 ml leite integral</li>
          <li><b>Almo√ßo (~700 kcal):</b> 150 g frango; 100 g arroz integral; br√≥colis + cenoura com azeite</li>
          <li><b>Lanche tarde (~350 kcal, pr√©):</b> sandu√≠che (p√£o integral, peito de peru, queijo) + 1 fruta</li>
          <li><b>Jantar (~600 kcal):</b> 150‚Äì180 g salm√£o ou carne; 100‚Äì150 g batata doce; salada com azeite</li>
          <li><b>Ceia (~600 kcal) ‚Äì Hipercal√≥rico:</b> 1 dose + 200 ml leite integral</li>
        </ul>
      </div>
      <div class="day">
        <h3>Dia 2 ‚Äì Ter√ßa <span class="badge">Costas + B√≠ceps</span></h3>
        <ul>
          <li><b>Caf√© & almo√ßo:</b> mesmas quantidades reduzidas do Dia 1</li>
          <li><b>Lanche manh√£:</b> 1 dose hipercal√≥rico (~600‚Äì700 kcal)</li>
          <li><b>Lanche tarde (pr√©):</b> sandu√≠che + fruta (~350 kcal)</li>
          <li><b>Jantar (~600 kcal):</b> carne/frango + 100‚Äì150 g carbo + legumes</li>
          <li><b>Ceia:</b> hipercal√≥rico (~600 kcal)</li>
        </ul>
      </div>
      <div class="day">
        <h3>Dia 3 ‚Äì Quarta <span class="badge">Pernas + Gl√∫teos</span></h3>
        <ul>
          <li><b>Caf√©:</b> 3 ovos + p√£o + fruta</li>
          <li><b>Almo√ßo (~700 kcal):</b> 150‚Äì180 g prote√≠na + 100 g carbo + legumes</li>
          <li><b>Lanche manh√£:</b> hipercal√≥rico (~600 kcal)</li>
          <li><b>Lanche tarde (pr√©):</b> fruta + 20‚Äì30 g castanhas (~250 kcal)</li>
          <li><b>Jantar (~600 kcal):</b> prote√≠na + carbo</li>
          <li><b>Ceia:</b> hipercal√≥rico (~600 kcal)</li>
        </ul>
      </div>
      <div class="day">
        <h3>Dia 4 ‚Äì Quinta <span class="badge">Ombros + Abd√¥men</span></h3>
        <ul>
          <li><b>Alimenta√ß√£o:</b> mesma estrutura reduzida (como Dia 1)</li>
          <li><b>Abd√¥men:</b> prancha 3√ó1 min + crunch 3√ó20</li>
        </ul>
      </div>
      <div class="day">
        <h3>Dia 5 ‚Äì Sexta <span class="badge">Full Body leve / Cardio leve</span></h3>
        <ul>
          <li><b>Alimenta√ß√£o:</b> igual aos dias anteriores</li>
          <li><b>Lanche manh√£:</b> hipercal√≥rico</li>
        </ul>
      </div>
      <div class="day">
        <h3>Dia 6 ‚Äì S√°bado <span class="badge">Treino extra / M√∫sculos fracos</span></h3>
        <ul>
          <li><b>Alimenta√ß√£o:</b> idem + hipercal√≥rico</li>
        </ul>
      </div>
      <div class="day">
        <h3>Dia 7 ‚Äì Domingo <span class="badge">Descanso</span></h3>
        <ul>
          <li><b>Alimenta√ß√£o:</b> igual; hipercal√≥rico opcional</li>
          <li><b>Atividade leve:</b> caminhada ou alongamento</li>
        </ul>
      </div>
    </div>
    <div class="kcal">‚úÖ Estrat√©gia: 1 dose no lanche da manh√£ + 1 dose na ceia; refei√ß√µes s√≥lidas com volume reduzido; super√°vit ~3.100 kcal/dia.</div>
  </section>

  <!-- TREINAMENTO DETALHADO (7 DIAS) -->
  <section id="treino" class="section card">
    <h2>üèãÔ∏è Plano de Treinamento ‚Äì Semana</h2>
    <div class="grid grid-2">
      <div class="day">
        <h3>Dia 1 ‚Äì Segunda ‚Ä¢ Peito + Tr√≠ceps + Abd√¥men</h3>
        <ul>
          <li>Supino reto 4√ó10</li>
          <li>Supino inclinado 3√ó10</li>
          <li>Crossover 3√ó12</li>
          <li>Tr√≠ceps pulley 3√ó12</li>
          <li>Tr√≠ceps testa 3√ó12</li>
          <li>Abd√¥men: prancha 3√ó1 min + crunch 3√ó20</li>
        </ul>
      </div>
      <div class="day">
        <h3>Dia 2 ‚Äì Ter√ßa ‚Ä¢ Costas + B√≠ceps</h3>
        <ul>
          <li>Puxada frente 4√ó10</li>
          <li>Remada curvada 4√ó10</li>
          <li>Barra fixa 3√ó at√© falhar</li>
          <li>Rosca direta 3√ó12</li>
          <li>Rosca martelo 3√ó12</li>
        </ul>
      </div>
      <div class="day">
        <h3>Dia 3 ‚Äì Quarta ‚Ä¢ Pernas + Gl√∫teos</h3>
        <ul>
          <li>Agachamento 4√ó10</li>
          <li>Leg press 4√ó12</li>
          <li>Avan√ßo 3√ó12 (cada perna)</li>
          <li>Stiff 3√ó12</li>
          <li>Panturrilha 3√ó20</li>
        </ul>
      </div>
      <div class="day">
        <h3>Dia 4 ‚Äì Quinta ‚Ä¢ Ombros + Abd√¥men</h3>
        <ul>
          <li>Desenvolvimento militar 4√ó10</li>
          <li>Eleva√ß√£o lateral 3√ó12</li>
          <li>Eleva√ß√£o frontal 3√ó12</li>
          <li>Face pull 3√ó12</li>
          <li>Abd√¥men: prancha 3√ó1 min + crunch 3√ó20</li>
        </ul>
      </div>
      <div class="day">
        <h3>Dia 5 ‚Äì Sexta ‚Ä¢ Full Body leve / Cardio leve</h3>
        <ul>
          <li>Supino, remada, agachamento 3√ó10 (leve)</li>
          <li>OU cardio leve 30 min</li>
        </ul>
      </div>
      <div class="day">
        <h3>Dia 6 ‚Äì S√°bado ‚Ä¢ Extra / Pontos fracos</h3>
        <ul>
          <li>Full body leve ou foco em m√∫sculos mais fracos</li>
        </ul>
      </div>
      <div class="day">
        <h3>Dia 7 ‚Äì Domingo ‚Ä¢ Descanso</h3>
        <ul>
          <li>Descanso ativo: caminhada/alongamento</li>
        </ul>
      </div>
    </div>
  </section>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const metaEl = document.getElementById('meta');
  metaEl.textContent = new Date().toLocaleDateString('pt-BR', {weekday:'long', day:'2-digit', month:'2-digit'});

  // Tabs
  document.querySelectorAll('.tab').forEach(btn=>{
    btn.addEventListener('click',()=>{
      document.querySelectorAll('.tab').forEach(b=>b.classList.remove('active'));
      document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
      btn.classList.add('active');
      document.getElementById(btn.dataset.tab).classList.add('active');
    })
  })

  // ---------- Di√°rio (tabela) ----------
  const ROWS = 30; // dias
  const tbody = document.querySelector('#tbl tbody');

  function loadState(){
    return JSON.parse(localStorage.getItem('ganhoMassa_diario')||'null') || [];
  }
  function saveState(state){
    localStorage.setItem('ganhoMassa_diario', JSON.stringify(state));
  }

  function emptyRow(date){
    return {date, treino:false, cafe:false, lm:false, almoco:false, lt:false, jantar:false, ceia:false, peso:""};
  }

  function build(){
    const state = loadState();
    tbody.innerHTML = '';
    for(let i=0;i<ROWS;i++){
      const d = new Date(); d.setDate(d.getDate()+i);
      const date = d.toLocaleDateString('pt-BR');
      const row = state[i] || emptyRow(date);

      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${date}</td>
        <td><input type="checkbox" ${row.treino? 'checked':''} data-k="treino"></td>
        <td><input type="checkbox" ${row.cafe? 'checked':''} data-k="cafe"></td>
        <td><input type="checkbox" ${row.lm? 'checked':''} data-k="lm"></td>
        <td><input type="checkbox" ${row.almoco? 'checked':''} data-k="almoco"></td>
        <td><input type="checkbox" ${row.lt? 'checked':''} data-k="lt"></td>
        <td><input type="checkbox" ${row.jantar? 'checked':''} data-k="jantar"></td>
        <td><input type="checkbox" ${row.ceia? 'checked':''} data-k="ceia"></td>
        <td>
          <div class="pill"><span style="width:${pct(row)}%"></span></div>
          <div class="muted" style="font-size:12px">${Math.round(pct(row))}%</div>
        </td>
        <td><input type="number" step="0.1" value="${row.peso}" data-k="peso"></td>
      `;
      tbody.appendChild(tr);
    }
  }

  function pct(row){
    const done = ['treino','cafe','lm','almoco','lt','jantar','ceia'].filter(k=>row[k]).length;
    return (done/7)*100;
  }

  function readTable(){
    const rows = [...tbody.querySelectorAll('tr')];
    return rows.map((tr)=>{
      const date = tr.children[0].textContent;
      const get = (sel)=> tr.querySelector(sel);
      return {
        date,
        treino: get('[data-k="treino"]').checked,
        cafe:   get('[data-k="cafe"]').checked,
        lm:     get('[data-k="lm"]').checked,
        almoco: get('[data-k="almoco"]').checked,
        lt:     get('[data-k="lt"]').checked,
        jantar: get('[data-k="jantar"]').checked,
        ceia:   get('[data-k="ceia"]').checked,
        peso:   get('[data-k="peso"]').value
      }
    })
  }

  function refreshPills(){
    [...tbody.querySelectorAll('tr')].forEach((tr,i)=>{
      const s = readTable()[i];
      const w = Math.round(pct(s));
      tr.querySelector('.pill > span').style.width = w+'%';
      tr.querySelector('.muted').textContent = w+'%';
    })
  }

  tbody.addEventListener('change', (e)=>{
    const state = readTable();
    saveState(state);
    refreshPills();
    drawCharts(state);
  })

  document.getElementById('reset').addEventListener('click',()=>{
    if(confirm('Tem certeza que deseja apagar todos os dados?')){
      localStorage.removeItem('ganhoMassa_diario');
      build();
      drawCharts(readTable());
    }
  })

  document.getElementById('mark-today').addEventListener('click',()=>{
    const todayRow = tbody.querySelector('tr');
    if(!todayRow) return;
    todayRow.querySelectorAll('input[type="checkbox"]').forEach(cb=>cb.checked=true);
    const state = readTable();
    saveState(state); refreshPills(); drawCharts(state);
  })

  document.getElementById('unmark-today').addEventListener('click',()=>{
    const todayRow = tbody.querySelector('tr');
    if(!todayRow) return;
    todayRow.querySelectorAll('input[type="checkbox"]').forEach(cb=>cb.checked=false);
    const state = readTable();
    saveState(state); refreshPills(); drawCharts(state);
  })

  // Charts
  let pesoChart, compChart;
  function drawCharts(state){
    const labels = state.map(r=>r.date);
    const pesos = state.map(r=> r.peso? Number(r.peso): null);
    const comp = state.map(r=> Math.round(pct(r)) );

    // Peso
    const ctx1 = document.getElementById('pesoChart').getContext('2d');
    if(pesoChart) pesoChart.destroy();
    pesoChart = new Chart(ctx1, {type:'line', data:{labels, datasets:[{label:'Peso (kg)', data:pesos, borderColor:'#38bdf8', backgroundColor:'rgba(56,189,248,.2)', tension:.3, spanGaps:true}]}, options:{plugins:{legend:{labels:{color:'#e2e8f0'}}}, scales:{x:{ticks:{color:'#94a3b8'}},y:{ticks:{color:'#94a3b8'}}}}});

    // Cumprimento
    const ctx2 = document.getElementById('cumprimentoChart').getContext('2d');
    if(compChart) compChart.destroy();
    compChart = new Chart(ctx2, {type:'bar', data:{labels, datasets:[{label:'% do dia', data:comp, backgroundColor:'rgba(34,197,94,.6)'}]}, options:{plugins:{legend:{labels:{color:'#e2e8f0'}}}, scales:{x:{ticks:{color:'#94a3b8'}},y:{beginAtZero:true,max:100,ticks:{color:'#94a3b8'}}}}});
  }

  // init
  build();
  const initial = loadState();
  if(initial.length){ drawCharts(initial); refreshPills(); }
  else { saveState(readTable()); drawCharts(readTable()); }
</script>
</body>
</html>

